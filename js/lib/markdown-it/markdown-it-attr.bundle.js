/* esm.sh - esbuild bundle(@sup39/markdown-it-attr@1.2.2) es2022 production */
var N=Object.create;var k=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var z=(n,e,l,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of S(e))!$.call(n,t)&&t!==l&&k(n,t,{get:()=>e[t],enumerable:!(s=P(e,t))||s.enumerable});return n};var F=(n,e,l)=>(l=n!=null?N(D(n)):{},z(e||!n||!n.__esModule?k(l,"default",{value:n,enumerable:!0}):l,n));var b=y((et,q)=>{function G(n,e,l=65536){let s=0,t=[],r=[],u;for(;(u=e.exec(n))&&s<l;){let i=u.groups;if(i.id)r.push(["id",i.id]);else if(i.class)t.push(i.class);else if(i.attr){let o=i.q&&i.q.length,c=o?i.val.slice(o,-o):i.val||"";r.push([i.attr,c])}else if(i.term)return t.length&&r.push(["class",t.join(" ")]),{attrs:r,index:u.index+u[0].length};s++}return null}function H(n,e){if(!n[e])return null;let s=0;for(e--;e>=0;e--){let t=n[e],{nesting:r}=t;if(r===1&&s===0)return t;s+=r}return null}function J(n,e,l,s=()=>!0){for(let t=e,r=n.length;t<r;t++){let u=n[t];if(!s(u))return;if(l(u))return u}}function K(n,e,l,s=()=>!0){for(let t=e;t>=0;t--){let r=n[t];if(!s(r))return;if(l(r))return r}}function Q(n,e,l,s=()=>!0){for(let t=e;t>=0;t--){let r=n[t];if(!s(r))return-1;if(l(r))return t}return-1}function T(n,e){let{attrs:l}=e;l&&l.forEach(s=>n.attrPush(s))}q.exports={parseAttrs:G,findOpenToken:H,find:J,rfind:K,rfindIndex:Q,attrConcat:T}});var w=y((nt,O)=>{var{findOpenToken:A,find:U,rfind:v,rfindIndex:V,attrConcat:_}=b(),E=[{name:"first_child",handler(n,e,l,s,t){if(e!==0)return;let r=v(t,s-1,i=>!i.hidden,i=>i.nesting===1);if(!r)return;_(r,n);let u=l[1];return u&&u.type==="text"&&(u.content=u.content.replace(/^\s+/,"")),!0}},{name:"after_inline_block",handler(n,e,l){let s=V(l,e-1,r=>r.type!=="text"||!!r.content),t=s>=0&&l[s];if(!!t){if(t.nesting===-1){let r=A(l,s);if(!r)return!1;_(r,n)}else if(t.nesting===0&&t.type!=="text")_(t,n);else return!1;return!0}}},{name:"last_child",handler(n,e,l,s,t){if(e!==l.length-1)return;let r=U(t,s+1,c=>!c.hidden,c=>c.nesting===-1);if(!r)return;let{level:u}=r,i=v(t,s-1,c=>c.level===u,c=>c.nesting===1);if(!i)return;n.attrs.forEach(c=>i.attrPush(c));let o=l[e-1];return o&&o.type==="text"&&(o.content=o.content.replace(/\s+$/,"")),!0}}];O.exports={inlineAttrsApplyRules:E};E.unshift({name:"raw_table_tr",disabled:!0,handler(n,e,l,s,t){if(l.length!==1||t.length<=e+2||!(t[s+1].type==="td_close"&&t[s+2].type==="tr_close"))return;let r=A(t,s+2);if(!!r)return _(r,n),t.splice(s+1,1),t.splice(s-1,1),!0}})});var j=y((rt,W)=>{var{parseAttrs:I,attrConcat:X}=b(),{inlineAttrsApplyRules:R}=w();function Y(n,e={}){let l=e.deliminator||"{",s=l.length,t=/\#(?<id>[^\s#.="'}]+)|\.(?<class>[^\s#.="'}]+)|(?<attr>[^\s#.="'}]+)(?:\=(?<val>[^\s}"'][^\s}]*|(?<q>["']).*?\k<q>))?|(?<term>})/g,r=e.re,u=r?r.sticky||r.global?r:new RegExp(r,r.flags+"g"):t;n.block.ruler.before("table","block_attrs",(i,o,c,d)=>{let{src:a,bMarks:f,eMarks:h,tShift:p}=i;if(i.sCount[o]!==i.sCount[o+1]||c>o+2&&i.sCount[o+1]===i.sCount[o+2]&&a.startsWith(l,f[o+1]+p[o+1]))return!1;let x=f[o]+p[o],m=h[o];if(a.startsWith(l,x)){u.lastIndex=x+s;let{attrs:g,index:M}=I(a,u)||{};if(!(g&&M===m))return!1;if(d)return!0;i.line=o+1;let C=i.push("block_attr","",0);return C.attrs=g,C.hidden=!0,!0}return!1},{alt:["paragraph"]}),n.inline.ruler.push("inline_attrs",(i,o)=>{let{src:c,pos:d}=i;if(c.startsWith(l,d)){u.lastIndex=d+s;let{attrs:a,index:f}=I(c,u)||{};if(!a)return!1;if(!o){let h=i.push("inline_attr","",0);h.attrs=a,h.content=c.substring(d,f),h.hidden=!0}return i.pos=f,!0}return!1}),n.core.ruler.after("block","apply_block_attrs",i=>{i.tokens.forEach((o,c,d)=>{if(o.type==="block_attr"&&o.attrs){let a=d[c+1];a&&(X(a,o),d.splice(c,1))}})}),n.core.ruler.after("inline","apply_inline_attrs",i=>{i.tokens.forEach((o,c,d)=>{let{children:a}=o;!a||(a.forEach((f,h,p)=>{if(f.type!=="inline_attr")return;R.some(({handler:m,disabled:g})=>g?!1:m(f,h,p,c,d))||(f.type="text",f.hidden=!1)}),o.children=a.filter(f=>f.type!=="inline_attr"))})})}W.exports=Object.assign(Y,{inlineAttrsApplyRules:R})});var Z=F(j()),{default:L,...B}=Z,st=L!==void 0?L:B;export{st as default};
