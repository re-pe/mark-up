/* esm.sh - esbuild bundle(@humanwhocodes/markdown-it-markua-aside@0.2.0) es2022 production */
var S=new Set(["aside","blurb"]),T=new Map([["A>","aside"],["B>","blurb"],["C>","blurb:center"],["D>","blurb:discussion"],["E>","blurb:error"],["I>","blurb:information"],["Q>","blurb:question"],["T>","blurb:tip"],["W>","blurb:warning"],["X>","blurb:exercise"]]);function y(n){return n===" "||n==="	"}function g(n,e,i,u,r){return n[e].tag="aside",r.renderToken(n,e,i,u,r)}function M(n,e,i,u,r){let l=n[e];return l.tag="aside",l.nesting===1&&(l.attrJoin("class","blurb"),l.info&&l.info.className&&l.attrJoin("class",l.info.className)),r.renderToken(n,e,i,u,r)}function p(n,e){let i=n.bMarks[e]+n.tShift[e],u=n.eMarks[e],r=n.src.slice(i,u);return{start:i,end:u,text:r}}function x(n,e){let{text:i,start:u}=p(n,e),r=i.slice(0,2),l=T.get(r);if(!l)return;let[t,c]=l.split(":"),a=i[2],s=y(a);return{tagName:t,className:c,marker:r,start:u,end:u+2+(s?1:0),lineNumber:e,spaceAfter:s}}function L(n,e){let{text:i,start:u,end:r}=p(n,e),l=n.src;if(i[0]!=="{")return;let t="";for(let o=1;/[a-z]/i.test(i[o])&&o<i.length;o++)t+=i[o];if(!S.has(t))return;let c=6,a="";if(t==="blurb"){let o=n.skipSpaces(u+6);if(l[o]===","){if(o=n.skipSpaces(o+1),l.slice(o,o+6)!=="class:")return;o=n.skipSpaces(o+6);let b=o;for(;l.charAt(b)!=="}"&&b<r;b++)a+=l.charAt(b);c=b-u}}if(i[c]!=="}")return;let s=u,f=s+c+1;return{tagName:t,className:a,start:s,end:f,lineNumber:e,alone:s===u&&f===r}}function N(n,e,i){let{text:u,start:r,end:l}=p(n,e),t=`{/${i}}`,c=u.indexOf(t);if(c===-1)return;let a=r+c,s=a+t.length;return{tagName:i,start:a,end:s,lineNumber:e,alone:a===r&&s===l}}function _(n,e,i,u){let r=n.lineMax,l=e.lineNumber,t=e.end;if(u)return!0;let c=[n.bMarks[l]];n.bMarks[l]=t;let a=n.parentType;n.parentType=e.tagName;let s;for(s=l+1;s<i;s++){let d=x(n,s);if(!d||d.tagName!==e.tagName||d.className!==e.className)break;c.push(n.bMarks[s]),n.bMarks[s]=d.end}let f=n.blkIndent;n.blkIndent=0;let o=e.tagName,b=n.push(`${o}_open`,o,1);return b.markup=e.marker,b.info=o==="blurb"?{className:e.className}:null,n.md.block.tokenize(n,l,s),b=n.push(`${o}_close`,o,-1),b.markup=e.marker,n.lineMax=r,n.parentType=a,n.blkIndent=f,!0}function B(n,e,i,u){let r=e.lineNumber,l=r+1,t=!1,c=N(n,r,e.tagName);if(c&&(t=!0,u))return!0;if(t)l=r+1;else for(l=r;l++,!(l>=i||(c=N(n,l,e.tagName),c)););let a=e.tagName,s=n.parentType,f=n.lineMax;n.parentType=a,n.lineMax=l;let o=n.push(a+"_open",a,1);o.markup=`{${a}}`,o.block=!0,o.info=a==="blurb"?{className:e.className}:null,o.map=[r,r+1];let b=n.bMarks[r],d=n.eMarks[r],k=e.lineNumber,m=c.lineNumber;return e.alone?k++:n.bMarks[e.lineNumber]=e.end,c.alone||(m++,n.eMarks[c.lineNumber]=c.start),n.md.block.tokenize(n,k,m),n.bMarks[r]=b,n.eMarks[r]=d,o=n.push(a+"_close",a,-1),o.markup=`{/${a}}`,o.block=!0,n.parentType=s,n.lineMax=f,n.line=c.lineNumber+1,!0}function P(n){function e(i,u,r,l){if(i.sCount[u]-i.blkIndent>=4)return!1;let t=x(i,u);if(t)return _(i,t,r,l);let c=L(i,u);return c?B(i,c,r,l):!1}n.block.ruler.before("paragraph","aside",e,{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.aside_open=g,n.renderer.rules.aside_close=g,n.renderer.rules.blurb_open=M,n.renderer.rules.blurb_close=M}export{P as asidePlugin};
