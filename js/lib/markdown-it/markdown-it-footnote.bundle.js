/* esm.sh - esbuild bundle(markdown-it-footnote@3.0.3) es2022 production */
var y=Object.create;var g=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var P=(f,e)=>()=>(e||f((e={exports:{}}).exports,e),e.exports);var j=(f,e,i,_)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of B(e))!N.call(f,t)&&t!==i&&g(f,t,{get:()=>e[t],enumerable:!(_=E(e,t))||_.enumerable});return f};var z=(f,e,i)=>(i=f!=null?y(D(f)):{},j(e||!f||!f.__esModule?g(i,"default",{value:f,enumerable:!0}):i,f));var w=P((W,S)=>{"use strict";function F(f,e,i,_){var t=Number(f[e].meta.id+1).toString(),d="";return typeof _.docId=="string"&&(d="-"+_.docId+"-"),d+t}function O(f,e){var i=Number(f[e].meta.id+1).toString();return f[e].meta.subId>0&&(i+=":"+f[e].meta.subId),"["+i+"]"}function R(f,e,i,_,t){var d=t.rules.footnote_anchor_name(f,e,i,_,t),A=t.rules.footnote_caption(f,e,i,_,t),I=d;return f[e].meta.subId>0&&(I+=":"+f[e].meta.subId),'<sup class="footnote-ref"><a href="#fn'+d+'" id="fnref'+I+'">'+A+"</a></sup>"}function q(f,e,i){return(i.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`)+`<section class="footnotes">
<ol class="footnotes-list">
`}function G(){return`</ol>
</section>
`}function H(f,e,i,_,t){var d=t.rules.footnote_anchor_name(f,e,i,_,t);return f[e].meta.subId>0&&(d+=":"+f[e].meta.subId),'<li id="fn'+d+'" class="footnote-item">'}function J(){return`</li>
`}function K(f,e,i,_,t){var d=t.rules.footnote_anchor_name(f,e,i,_,t);return f[e].meta.subId>0&&(d+=":"+f[e].meta.subId),' <a href="#fnref'+d+'" class="footnote-backref">\u21A9\uFE0E</a>'}S.exports=function(e){var i=e.helpers.parseLinkLabel,_=e.utils.isSpace;e.renderer.rules.footnote_ref=R,e.renderer.rules.footnote_block_open=q,e.renderer.rules.footnote_block_close=G,e.renderer.rules.footnote_open=H,e.renderer.rules.footnote_close=J,e.renderer.rules.footnote_anchor=K,e.renderer.rules.footnote_caption=O,e.renderer.rules.footnote_anchor_name=F;function t(o,n,p,u){var s,h,c,l,r,v,b,m,k,a,T,C=o.bMarks[n]+o.tShift[n],x=o.eMarks[n];if(C+4>x||o.src.charCodeAt(C)!==91||o.src.charCodeAt(C+1)!==94)return!1;for(r=C+2;r<x;r++){if(o.src.charCodeAt(r)===32)return!1;if(o.src.charCodeAt(r)===93)break}if(r===C+2||r+1>=x||o.src.charCodeAt(++r)!==58)return!1;if(u)return!0;for(r++,o.env.footnotes||(o.env.footnotes={}),o.env.footnotes.refs||(o.env.footnotes.refs={}),v=o.src.slice(C+2,r-2),o.env.footnotes.refs[":"+v]=-1,b=new o.Token("footnote_reference_open","",1),b.meta={label:v},b.level=o.level++,o.tokens.push(b),s=o.bMarks[n],h=o.tShift[n],c=o.sCount[n],l=o.parentType,T=r,m=k=o.sCount[n]+r-(o.bMarks[n]+o.tShift[n]);r<x&&(a=o.src.charCodeAt(r),_(a));){a===9?k+=4-k%4:k++;r++}return o.tShift[n]=r-T,o.sCount[n]=k-m,o.bMarks[n]=T,o.blkIndent+=4,o.parentType="footnote",o.sCount[n]<o.blkIndent&&(o.sCount[n]+=o.blkIndent),o.md.block.tokenize(o,n,p,!0),o.parentType=l,o.blkIndent-=4,o.tShift[n]=h,o.sCount[n]=c,o.bMarks[n]=s,b=new o.Token("footnote_reference_close","",-1),b.level=--o.level,o.tokens.push(b),!0}function d(o,n){var p,u,s,h,c,l=o.posMax,r=o.pos;return r+2>=l||o.src.charCodeAt(r)!==94||o.src.charCodeAt(r+1)!==91||(p=r+2,u=i(o,r+1),u<0)?!1:(n||(o.env.footnotes||(o.env.footnotes={}),o.env.footnotes.list||(o.env.footnotes.list=[]),s=o.env.footnotes.list.length,o.md.inline.parse(o.src.slice(p,u),o.md,o.env,c=[]),h=o.push("footnote_ref","",0),h.meta={id:s},o.env.footnotes.list[s]={content:o.src.slice(p,u),tokens:c}),o.pos=u+1,o.posMax=l,!0)}function A(o,n){var p,u,s,h,c,l=o.posMax,r=o.pos;if(r+3>l||!o.env.footnotes||!o.env.footnotes.refs||o.src.charCodeAt(r)!==91||o.src.charCodeAt(r+1)!==94)return!1;for(u=r+2;u<l;u++){if(o.src.charCodeAt(u)===32||o.src.charCodeAt(u)===10)return!1;if(o.src.charCodeAt(u)===93)break}return u===r+2||u>=l||(u++,p=o.src.slice(r+2,u-1),typeof o.env.footnotes.refs[":"+p]>"u")?!1:(n||(o.env.footnotes.list||(o.env.footnotes.list=[]),o.env.footnotes.refs[":"+p]<0?(s=o.env.footnotes.list.length,o.env.footnotes.list[s]={label:p,count:0},o.env.footnotes.refs[":"+p]=s):s=o.env.footnotes.refs[":"+p],h=o.env.footnotes.list[s].count,o.env.footnotes.list[s].count++,c=o.push("footnote_ref","",0),c.meta={id:s,subId:h,label:p}),o.pos=u,o.posMax=l,!0)}function I(o){var n,p,u,s,h,c,l,r,v,b,m=!1,k={};if(!!o.env.footnotes&&(o.tokens=o.tokens.filter(function(a){return a.type==="footnote_reference_open"?(m=!0,v=[],b=a.meta.label,!1):a.type==="footnote_reference_close"?(m=!1,k[":"+b]=v,!1):(m&&v.push(a),!m)}),!!o.env.footnotes.list)){for(c=o.env.footnotes.list,l=new o.Token("footnote_block_open","",1),o.tokens.push(l),n=0,p=c.length;n<p;n++){for(l=new o.Token("footnote_open","",1),l.meta={id:n,label:c[n].label},o.tokens.push(l),c[n].tokens?(r=[],l=new o.Token("paragraph_open","p",1),l.block=!0,r.push(l),l=new o.Token("inline","",0),l.children=c[n].tokens,l.content=c[n].content,r.push(l),l=new o.Token("paragraph_close","p",-1),l.block=!0,r.push(l)):c[n].label&&(r=k[":"+c[n].label]),r&&(o.tokens=o.tokens.concat(r)),o.tokens[o.tokens.length-1].type==="paragraph_close"?h=o.tokens.pop():h=null,s=c[n].count>0?c[n].count:1,u=0;u<s;u++)l=new o.Token("footnote_anchor","",0),l.meta={id:n,subId:u,label:c[n].label},o.tokens.push(l);h&&o.tokens.push(h),l=new o.Token("footnote_close","",-1),o.tokens.push(l)}l=new o.Token("footnote_block_close","",-1),o.tokens.push(l)}}e.block.ruler.before("reference","footnote_def",t,{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",d),e.inline.ruler.after("footnote_inline","footnote_ref",A),e.core.ruler.after("inline","footnote_tail",I)}});var Q=z(w()),{default:M,...U}=Q,X=M!==void 0?M:U;export{X as default};
