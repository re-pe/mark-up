/* esm.sh - esbuild bundle(markdown-it-toc-done-right@4.2.0) es2022 production */
function k(c){return encodeURIComponent(String(c).trim().toLowerCase().replace(/\s+/g,"-"))}function a(c){return String(c).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(c,u){var h;u=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\]|\\$\\<toc(\\{[^}]*\\})\\>)",slugify:k,uniqueSlugStartIndex:1,containerClass:"table-of-contents",containerId:void 0,listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0,callback:void 0},u);var C=new RegExp("^"+u.placeholder+"$","i");c.renderer.rules.tocOpen=function(n,t){var e=Object.assign({},u);return n&&t>=0&&(e=Object.assign(e,n[t].inlineOptions)),"<nav"+(e.containerId?' id="'+a(e.containerId)+'"':"")+' class="'+a(e.containerClass)+'">'},c.renderer.rules.tocClose=function(){return"</nav>"},c.renderer.rules.tocBody=function(n,t){var e=Object.assign({},u);n&&t>=0&&(e=Object.assign(e,n[t].inlineOptions));var r,l={},p=Array.isArray(e.level)?(r=e.level,function(s){return r.includes(s)}):function(s){return function(i){return i>=s}}(e.level);return function s(i){var o=e.listClass?' class="'+a(e.listClass)+'"':"",f=e.itemClass?' class="'+a(e.itemClass)+'"':"",y=e.linkClass?' class="'+a(e.linkClass)+'"':"";if(i.c.length===0)return"";var g="";return(i.l===0||p(i.l))&&(g+="<"+(a(e.listType)+o)+">"),i.c.forEach(function(d){p(d.l)?g+="<li"+f+"><a"+y+' href="#'+function(b){for(var v=b,O=e.uniqueSlugStartIndex;Object.prototype.hasOwnProperty.call(l,v);)v=b+"-"+O++;return l[v]=!0,v}(u.slugify(d.n))+'">'+(typeof e.format=="function"?e.format(d.n,a):a(d.n))+"</a>"+s(d)+"</li>":g+=s(d)}),(i.l===0||p(i.l))&&(g+="</"+a(e.listType)+">"),g}(h)},c.core.ruler.push("generateTocAst",function(n){h=function(t){for(var e={l:0,n:"",c:[]},r=[e],l=0,p=t.length;l<p;l++){var s=t[l];if(s.type==="heading_open"){var i=t[l+1].children.filter(function(f){return f.type==="text"||f.type==="code_inline"}).reduce(function(f,y){return f+y.content},""),o={l:parseInt(s.tag.substr(1),10),n:i,c:[]};if(o.l>r[0].l)r[0].c.push(o),r.unshift(o);else if(o.l===r[0].l)r[1].c.push(o),r[0]=o;else{for(;o.l<=r[0].l;)r.shift();r[0].c.push(o),r.unshift(o)}}}return e}(n.tokens),typeof u.callback=="function"&&u.callback(c.renderer.rules.tocOpen()+c.renderer.rules.tocBody()+c.renderer.rules.tocClose(),h)}),c.block.ruler.before("heading","toc",function(n,t,e,r){var l,p=n.src.slice(n.bMarks[t]+n.tShift[t],n.eMarks[t]).split(" ")[0];if(!C.test(p))return!1;if(r)return!0;var s=C.exec(p),i={};if(s!==null&&s.length===3)try{i=JSON.parse(s[2])}catch{}return n.line=t+1,(l=n.push("tocOpen","nav",1)).markup="",l.map=[t,n.line],l.inlineOptions=i,(l=n.push("tocBody","",0)).markup="",l.map=[t,n.line],l.inlineOptions=i,l.children=[],(l=n.push("tocClose","nav",-1)).markup="",!0},{alt:["paragraph","reference","blockquote"]})}export{m as default};
